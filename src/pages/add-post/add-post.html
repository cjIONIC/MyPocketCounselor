
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Create {{type}}</ion-title>
      <ion-buttons end>
        <button class="btnImage" ion-button icon-only round (click)="getImage()">
            <ion-icon class="image" name="image"></ion-icon>
          </button>
        </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content padding>

    <!-- 
    <ion-item>
        <ion-label color="primary" floating>Title</ion-label>
        <ion-input  no-lines type="text" [(ngModel)]="title" id="title" required></ion-input>
    </ion-item>

    <ion-item *ngIf="type === 'Event'">
        <ion-label color="primary" floating>Location</ion-label>
        <ion-input type="text" [(ngModel)]="location" required></ion-input>
    </ion-item>

    <ion-item *ngIf="type === 'Event'">
        <ion-label color="primary" floating>Starting Date</ion-label>
        <ion-datetime pickerFormat="MMMM D, YYYY" max="2050" [(ngModel)]="startDate" required></ion-datetime>
    </ion-item>

    <ion-item *ngIf="type === 'Event'">
        <ion-label color="primary" floating>Starting Time</ion-label>
        <ion-datetime pickerFormat="h:mm A" max="2050" [(ngModel)]="startTime" required></ion-datetime>
    </ion-item>
    
    <ion-item *ngIf="type === 'Event'">
        <ion-label color="primary" floating>Ending Date</ion-label>
        <ion-datetime pickerFormat="MMMM D, YYYY" max="2050" [(ngModel)]="endDate" required></ion-datetime>
    </ion-item>
    
    <ion-item *ngIf="type === 'Event'">
        <ion-label color="primary" floating>Ending Time</ion-label>
        <ion-datetime pickerFormat="h:mm A" [(ngModel)]="endTime" required></ion-datetime>
    </ion-item>

    <ion-item *ngIf="type === 'Event'">
        <ion-label color="primary" floating>Academic</ion-label>
        <ion-select [(ngModel)]="academic" multiple="true">
            
          <ion-option *ngFor="let unit of academicList" value ="{{unit.acID}}"> {{unit.acName}}</ion-option>
    
        </ion-select>
      </ion-item>

    <ion-item>
        <ion-label color="primary" floating>Description</ion-label>
        <ion-textarea type="text" class="description" [(ngModel)]="description" required></ion-textarea>
    </ion-item>

    <ion-item *ngIf="image" no-lines class="imageContainer">
        <div class="imageHeader">
            <button ion-button icon-only round class="closeImage"  (click)="removePic()"><ion-icon class="close" name="close"></ion-icon></button>
        </div>
        <img src="{{ image }}" class="src">
    </ion-item>

    <div class="buttons">
        <button ion-button class="btnAdd" (click)="verifyPost()">Post</button>
    </div>
    -->
    <form #appointmentForm="ngForm" (ngSubmit)="onAdd(appointmentForm.value)" novalidate>
      <ion-item>
        <ion-label color="primary" stacked>Title</ion-label>
        <ion-input type="text"
            #title="ngModel" 
            name="title" 
            ngModel required>
        </ion-input>
      </ion-item>

      <div *ngIf="type === 'Event'">
        <ion-item>
            <ion-label color="primary" stacked>Location</ion-label>
            <ion-input type="text" 
                #location="ngModel" 
                name="location" 
                ngModel required>
            </ion-input>
        </ion-item>
        <ion-item>
            <ion-label color="primary" stacked>Academic</ion-label>
            <ion-select #academic="ngModel" 
            name="academic" 
            placeholder="Choose Academic Unit/s to Post to"
            multiple="true"
            ngModel required>
            <ion-option *ngFor="let unit of academicList" value ="{{unit.acID}}"> {{unit.acName}}</ion-option>
            </ion-select>
        </ion-item>

        <div>Date</div>
        <ion-item>
            <ion-label>Include End Date</ion-label>
            <ion-checkbox checked="false" (ionChange)="endDateInclude($event.value)"></ion-checkbox>
        </ion-item>
        
        <!-- Date Form -->
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-item>
                        <ion-label color="primary" stacked>From</ion-label>
                        <ion-datetime pickerFormat="MMM D, YYYY" 
                            #startDate="ngModel" 
                            name="startDate" 
                            max="2050" 
                            [(ngModel)]="startDatetime"
                            required></ion-datetime>
                    </ion-item>
                </ion-col>
                <ion-col>
                    <div >
                        <button ion-item [disabled]="!includeEndDate">
                            <ion-label color="primary" stacked>To</ion-label>
                            <ion-datetime pickerFormat="MMM D, YYYY" 
                                #endDate="ngModel" 
                                name="endDate" 
                                max="2050" 
                                [(ngModel)]="endDatetime"
                                required></ion-datetime>
                        </button>
                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>

        <div>Time</div>
        <ion-item>
            <ion-label>Include End Time</ion-label>
            <ion-checkbox checked="false" (ionChange)="endTimeInclude($event.value)"></ion-checkbox>
        </ion-item>
        <!-- Time Form -->
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-item>
                        <ion-label color="primary" stacked>From</ion-label>
                        <ion-datetime pickerFormat="hh:mm A" 
                            #startTime="ngModel" 
                            name="startTime" 
                            [(ngModel)]="startDatetime"
                            required></ion-datetime>
                    </ion-item>
                </ion-col>
                <ion-col>
                    <div >
                        <button ion-item [disabled]="!includeTimeDate">
                            <ion-label color="primary" stacked>To</ion-label>
                            <ion-datetime pickerFormat="hh:mm A" 
                                #endTime="ngModel" 
                                name="endTime" 
                                [(ngModel)]="endDatetime"
                                required></ion-datetime>
                        </button>
                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>

        <button ion-item class="imageContainer" [hidden]="true">
            <div class="imageHeader">
                <button ion-button icon-only round class="closeImage"  (click)="removePic()"><ion-icon class="close" name="close"></ion-icon></button>
            </div>
            <ion-input type="text"
              #image="ngModel" 
              name="image" 
              [(ngModel)]="imageFile"
              required>
            </ion-input>
        </button>

        <ion-item *ngIf="imageFile" no-lines class="imageContainer">
            <div class="imageHeader">
                <button ion-button icon-only round class="closeImage"  (click)="removePic()"><ion-icon class="close" name="close"></ion-icon></button>
            </div>
            <img src="{{ imageFile }}" class="src">
        </ion-item>
      </div>
    </form>
    
</ion-content>
